# ğŸš€ We-World Precision Engineering - å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ“¦ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Nginx (80/443)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  é™æ€æ–‡ä»¶æœåŠ¡    â”‚    APIåå‘ä»£ç†            â”‚    â”‚
â”‚  â”‚  /var/www/      â”‚    /api â†’ :1337          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Reactå‰ç«¯   â”‚      â”‚ Strapiåç«¯     â”‚
        â”‚ (Viteæ„å»º)  â”‚      â”‚ (Node.js)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  PostgreSQL     â”‚
                         â”‚  (æ•°æ®åº“)        â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Node.js**: v18.0.0 - v22.x.x
- **PostgreSQL**: 14+ 
- **Nginx**: 1.18+
- **Git**: ä»»æ„ç‰ˆæœ¬

### æ¨èæœåŠ¡å™¨é…ç½®
- **CPU**: 2æ ¸+
- **å†…å­˜**: 4GB+
- **ç¡¬ç›˜**: 20GB+
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 8+ / Windows Server 2019+

---

## ğŸ“¥ ç¬¬ä¸€æ­¥:å®‰è£…PostgreSQL

### Windows

1. ä¸‹è½½PostgreSQLå®‰è£…åŒ…:
   ```
   https://www.postgresql.org/download/windows/
   ```

2. å®‰è£…æ—¶è®¾ç½®:
   - ç«¯å£: 5432(é»˜è®¤)
   - å¯†ç : è®¾ç½®postgresç”¨æˆ·å¯†ç 

3. åˆ›å»ºæ•°æ®åº“:
   ```cmd
   # æ‰“å¼€PowerShellæˆ–CMD
   psql -U postgres
   
   # åœ¨psqlä¸­æ‰§è¡Œ
   CREATE DATABASE we_world_db;
   CREATE USER strapi_user WITH ENCRYPTED PASSWORD 'your_secure_password';
   GRANT ALL PRIVILEGES ON DATABASE we_world_db TO strapi_user;
   \q
   ```

### Linux (Ubuntu/Debian)

```bash
# æ›´æ–°åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£…PostgreSQL
sudo apt install postgresql postgresql-contrib -y

# å¯åŠ¨PostgreSQL
sudo systemctl start postgresql
sudo systemctl enable postgresql

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres psql << EOF
CREATE DATABASE we_world_db;
CREATE USER strapi_user WITH ENCRYPTED PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE we_world_db TO strapi_user;
\q
EOF
```

---

## ğŸ“¦ ç¬¬äºŒæ­¥:é…ç½®åç«¯(Strapi)

### 1. è¿›å…¥åç«¯ç›®å½•
```bash
cd backend-strapi
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶
nano .env  # Linux
notepad .env  # Windows
```

ä¿®æ”¹ä»¥ä¸‹å†…å®¹:
```env
DATABASE_HOST=127.0.0.1
DATABASE_PORT=5432
DATABASE_NAME=we_world_db
DATABASE_USERNAME=strapi_user
DATABASE_PASSWORD=your_secure_password

# ç”Ÿæˆéšæœºå¯†é’¥(é‡è¦!)
# ä½¿ç”¨å‘½ä»¤: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ADMIN_JWT_SECRET=ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²1
API_TOKEN_SALT=ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²2
TRANSFER_TOKEN_SALT=ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²3
JWT_SECRET=ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²4
APP_KEYS=key1,key2,key3,key4
```

### 4. é¦–æ¬¡å¯åŠ¨(å¼€å‘æ¨¡å¼)
```bash
npm run develop
```

### 5. åˆ›å»ºç®¡ç†å‘˜è´¦å·
è®¿é—® `http://localhost:1337/admin` åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜è´¦å·

### 6. æ·»åŠ åˆå§‹æ•°æ®
é€šè¿‡Admin Panelæ·»åŠ :
1. **Product Categories** (äº§å“åˆ†ç±»)
   - Nameplate éŠ˜æ¿ (slug: nameplate)
   - Aluminum CNC & anodizing è»ŠåºŠåŠé™½æ¥µé‹æ (slug: cnc)

2. **Products** (äº§å“)
3. **News** (æ–°é—»)

---

## ğŸ¨ ç¬¬ä¸‰æ­¥:é…ç½®å‰ç«¯

### 1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
```bash
cd ..  # è¿”å›é¡¹ç›®æ ¹ç›®å½•
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local

# ç¼–è¾‘.env.local
nano .env.local  # Linux
notepad .env.local  # Windows
```

æ·»åŠ ä»¥ä¸‹å†…å®¹:
```env
VITE_API_URL=http://localhost:1337/api
GEMINI_API_KEY=your_gemini_api_key_here
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

è®¿é—® `http://localhost:5173`

---

## ğŸš¢ ç¬¬å››æ­¥:ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. æ„å»ºå‰ç«¯
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run build
```

æ„å»ºäº§ç‰©ä½äº `dist/` ç›®å½•

### 2. æ„å»ºåç«¯
```bash
cd backend-strapi

# è®¾ç½®ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production npm run build
```

### 3. å®‰è£…PM2 (è¿›ç¨‹ç®¡ç†å™¨)
```bash
npm install -g pm2
```

### 4. ä½¿ç”¨PM2å¯åŠ¨Strapi
```bash
# åœ¨backend-strapiç›®å½•ä¸‹
pm2 start npm --name "we-world-backend" -- start

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save

# æŸ¥çœ‹æ—¥å¿—
pm2 logs we-world-backend

# é‡å¯
pm2 restart we-world-backend
```

### 5. é…ç½®Nginx

#### å®‰è£…Nginx (Linux)
```bash
sudo apt install nginx -y
```

#### å¤åˆ¶é…ç½®æ–‡ä»¶
```bash
sudo cp backend-strapi/nginx.conf /etc/nginx/sites-available/we-world

# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/we-world /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯Nginx
sudo systemctl restart nginx
```

#### ä¿®æ”¹Nginxé…ç½®ä¸­çš„è·¯å¾„
ç¼–è¾‘ `/etc/nginx/sites-available/we-world`:
```nginx
# ä¿®æ”¹å‰ç«¯æ–‡ä»¶è·¯å¾„
root /var/www/we-world/frontend/dist;  # æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„
```

### 6. éƒ¨ç½²æ–‡ä»¶åˆ°æœåŠ¡å™¨
```bash
# åˆ›å»ºéƒ¨ç½²ç›®å½•
sudo mkdir -p /var/www/we-world/frontend
sudo mkdir -p /var/www/we-world/backend

# å¤åˆ¶æ–‡ä»¶
sudo cp -r dist/* /var/www/we-world/frontend/
sudo cp -r backend-strapi/* /var/www/we-world/backend/

# è®¾ç½®æƒé™
sudo chown -R www-data:www-data /var/www/we-world
```

---

## ğŸ”’ ç¬¬äº”æ­¥:é…ç½®HTTPS (æ¨è)

### ä½¿ç”¨Let's Encryptå…è´¹SSLè¯ä¹¦

```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx -y

# è·å–è¯ä¹¦
sudo certbot --nginx -d www.we-world.com.tw -d we-world.com.tw

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹Strapiæ—¥å¿—
```bash
pm2 logs we-world-backend
```

### æ•°æ®åº“å¤‡ä»½
```bash
# å¤‡ä»½
pg_dump -U strapi_user we_world_db > backup_$(date +%Y%m%d).sql

# æ¢å¤
psql -U strapi_user we_world_db < backup_20260202.sql

# è‡ªåŠ¨å¤‡ä»½è„šæœ¬
crontab -e
# æ·»åŠ : 0 2 * * * /path/to/backup_script.sh
```

### æ€§èƒ½ç›‘æ§
```bash
# æœåŠ¡å™¨èµ„æº
htop
df -h
free -m

# Nginxè®¿é—®æ—¥å¿—
tail -f /var/log/nginx/we-world-access.log

# PostgreSQLè¿æ¥æ•°
psql -U postgres -c "SELECT count(*) FROM pg_stat_activity;"
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLçŠ¶æ€
sudo systemctl status postgresql

# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
sudo netstat -tuln | grep 5432

# æŸ¥çœ‹PostgreSQLæ—¥å¿—
sudo tail -f /var/log/postgresql/postgresql-14-main.log
```

### 2. Strapiæ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node -v

# æ¸…é™¤ç¼“å­˜
cd backend-strapi
rm -rf .cache build

# é‡æ–°æ„å»º
npm run build
```

### 3. Nginxé…ç½®é”™è¯¯
```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log
```

### 4. å‰ç«¯APIè¿æ¥å¤±è´¥
- æ£€æŸ¥ `.env.local` ä¸­çš„ `VITE_API_URL`
- ç¡®è®¤Strapiæ­£åœ¨è¿è¡Œ: `pm2 status`
- æ£€æŸ¥CORSè®¾ç½®: `backend-strapi/config/middlewares.js`

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### Strapiç›¸å…³
- [å®˜æ–¹æ–‡æ¡£](https://docs.strapi.io/)
- [GitHub](https://github.com/strapi/strapi)

### PostgreSQLç›¸å…³
- [å®˜æ–¹æ–‡æ¡£](https://www.postgresql.org/docs/)

### Nginxç›¸å…³
- [å®˜æ–¹æ–‡æ¡£](https://nginx.org/en/docs/)

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] PostgreSQLå·²å®‰è£…å¹¶è¿è¡Œ
- [ ] Strapiåç«¯å·²é…ç½®å¹¶å¯åŠ¨
- [ ] ç®¡ç†å‘˜è´¦å·å·²åˆ›å»º
- [ ] åˆå§‹æ•°æ®å·²æ·»åŠ (åˆ†ç±»ã€äº§å“)
- [ ] å‰ç«¯å·²æ„å»º
- [ ] Nginxå·²é…ç½®å¹¶è¿è¡Œ
- [ ] PM2è¿›ç¨‹å®ˆæŠ¤å·²å¯ç”¨
- [ ] HTTPSè¯ä¹¦å·²é…ç½®(æ¨è)
- [ ] é˜²ç«å¢™è§„åˆ™å·²è®¾ç½®
- [ ] æ•°æ®åº“å¤‡ä»½è®¡åˆ’å·²å»ºç«‹
- [ ] ç›‘æ§ç³»ç»Ÿå·²éƒ¨ç½²

---

## ğŸ‰ éƒ¨ç½²å®Œæˆ!

è®¿é—®æ‚¨çš„ç½‘ç«™:
- **å‰ç«¯**: http://your-domain.com
- **ç®¡ç†åå°**: http://your-domain.com/admin
- **APIæ–‡æ¡£**: http://your-domain.com/api
